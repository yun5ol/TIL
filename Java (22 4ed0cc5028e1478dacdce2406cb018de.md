# Java (22

ì‘ì—…ì¤‘: In progress
íƒœê·¸: Dev, ë°±ì—”ë“œí”„ë¡œê·¸ë˜ë°, ì›¹&ëª¨ë°”ì¼, ìë°”í”„ë¡œê·¸ë˜ë°ê¸°ì´ˆ
í•™ìŠµì¼: 01/31/2023

## 27. Decorator ì„¤ê³„ ê¸°ë²•ì„ ì´ìš©í•˜ì—¬ ê¸°ëŠ¥ í™•ì¥

![Untitled](Java%20(22%204ed0cc5028e1478dacdce2406cb018de/Untitled.png)

### Data Processing Stream Classes = Decorator

`DataOutputStream`

`DataInputStream`

ë°ì´í„° >(ê°€ê³µ)> ë°”ì´íŠ¸ë°°ì—´

writeByte()

writeShort() â€¦ etc

ë°”ì´íŠ¸ë°°ì—´ >(ê°€ê³µ)> ë°ì´í„°

readByte()

readShort() â€¦ etc

<aside>
ğŸ“ cf. **Data Sink Stream Classes**

FileOutputStream / FileInputStream

</aside>

### Decorator Design Pattern ì˜ ê³„ì¸µë„ : I/O stream

![Untitled](Java%20(22%204ed0cc5028e1478dacdce2406cb018de/Untitled%201.png)

<<decorator>>

- ë‹¤ë¥¸ ê°ì²´ì— ê¸°ëŠ¥ì„ ë§ë¶™ì¸ë‹¤ â€œí™•ì¥â€
- ìƒì„±ìë¥¼ í†µí•´ ë‹¤ë¥¸ ê°ì²´ë¥¼ í¬í•¨

> cf. ê¸°ëŠ¥í™•ì¥ë²•
> 
> 
> ![KëŠ” ë³´í†µ ì¶”ìƒí´ë˜ìŠ¤ ì¼ ê²ƒ](Java%20(22%204ed0cc5028e1478dacdce2406cb018de/Untitled%202.png)
> 
> KëŠ” ë³´í†µ ì¶”ìƒí´ë˜ìŠ¤ ì¼ ê²ƒ
> 
> 1. ìƒì†
>     - ìˆ˜í¼í´ë˜ìŠ¤ì—ì„œ ìƒì†ë°›ëŠ” ë©”ì„œë“œë¥¼ ì„ íƒí•  ìˆ˜ ì—†ë‹¤
> 2. í¬í•¨
>     - ì„œë¡œ ì•„ë¬´ ê´€ë ¨(ìì‹, í˜•ì œ, ìì†â€¦)ì´ ì—†ëŠ” í´ë˜ìŠ¤ ê°„ì˜ í¬í•¨ê´€ê³„
> 3. ë°ì½”ë ˆì´í„°
>     - ë‹¨ìˆœ í¬í•¨ê´€ê³„ë¥¼ ë„˜ì–´, ê°™ì€ ë¶€ëª¨ì˜ í˜•ì œ, ìì†ê¹Œì§€ í¬í•¨í•œë‹¤
>         
>         â‡’ ê°™ì€ ë¶€ëª¨ì˜ ë‹¤ë¥¸ ìì‹ë“¤ë„ decorate í•  ìˆ˜ ìˆë‹¤.
>         
>     - ìœ ì—°ì„±ì´ ì¢‹ë‹¤ â€œí•„í„°â€ì—­í• 
>     - ëŒ€í‘œì ì¸ ì˜ˆì‹œ : File I/O í´ë˜ìŠ¤

---

## 28. ì¸ìŠ¤í„´ìŠ¤ë¥¼ í†µì§¸ë¡œ ì…ì¶œë ¥í•˜ê¸° (ê°ì²´ ì§ë ¬í™”)

### De/Serialize (ì—­/ì§ë ¬í™”)

![Untitled](Java%20(22%204ed0cc5028e1478dacdce2406cb018de/Untitled%203.png)

`ObjectInputStream`

`ObjectOutputStream`

ê°ì²´ >(ì§ë ¬í™”=marshaling)> ë°”ì´íŠ¸ë°°ì—´

í´ë˜ìŠ¤ì •ë³´, í•„ë“œì •ë³´, ì¸ìŠ¤í„´ìŠ¤ë°ì´í„° ë“± ì½ì–´ë“¤ì¸ë‹¤.

ë°”ì´íŠ¸ë°°ì—´ >(ì—­ì§ë ¬í™”,=unmarshaling)> ê°ì²´

<aside>
ğŸ“ í•´ë‹¹ í´ë˜ìŠ¤ë¥¼ ì‚¬ìš©í•˜ë ¤ë©´, ê°ì²´ê°€ í•´ë‹¹ í´ë˜ìŠ¤ë¥¼ êµ¬í˜„/ì„ ì–¸ í•´ì•¼í•œë‹¤.
â‡’ Serialize í—ˆìš©ìœ¼ë¡œ ì„¤ì • = java.io.Serializable ì¸í„°í˜ì´ìŠ¤ êµ¬í˜„

Serializable ì¸í„°í˜ì´ìŠ¤
ê°ì²´ë¥¼ ìë™ìœ¼ë¡œ ì§ë ¬í™” í•  ìˆ˜ ìˆë„ë¡ ì„¤ì •í•œë‹¤.
ë”°ë¡œ ë©”ì„œë“œë¥¼ êµ¬í˜„í•  í•„ìš”ëŠ” ì—†ë‹¤.
ë‹¨ì§€, ì§ë ¬í™”ë¥¼ í™œì„±í™”ì‹œí‚¤ëŠ” **í‘œì‹œì ì—­í• **ì„ í•  ë¿ì´ë‹¤.

</aside>

```java
# Board
public class Board implements java.io.Serializable {
// í‘œì‹œì ì—­í• ì´ë‹¤! (-zable)

private static final long serialVersionUID = 1L; // ìë™ì¶”ê°€
// ì§ë ¬í™” ë°ì´í„°ì˜ ë²„ì „ì„ ëª…ì‹œí•œë‹¤.
// ë‚˜ì¤‘ì— ë°ì´í„°ë¥¼ ì½ì„ ë•Œ, ìœ„ ë²„ì „ì„ ë³´ê³  
// ì½ì„ ìˆ˜ ìˆëŠ” ë°ì´í„°ì¸ì§€ ObjectInputStream í´ë˜ìŠ¤ê°€ íŒë‹¨í•˜ëŠ” ìš©ë„ë¡œ ì‚¬ìš©í•œë‹¤.
```

cf.

```java
# BoardDao
public void save(String filename) {
    try (ObjectOutputStream out = new ObjectOutputStream(new FileOutputStream(filename))) {
      out.writeObject(list.size()); 
//í†µì§¸ë¡œ ì €ì¥í•  ê²½ìš°, list ì •ë³´ ë˜í•œ ì €ì¥ëœë‹¤ (array, linked...)

//    try (ObjectOutputStream out = new ObjectOutputStream(new FileOutputStream(filename))) {
//
//      out.writeInt(list.size());
//
//      for (Board b : list) {
//        out.writeObject(b);
//      }
//    }

  } catch (Exception e) {
    e.printStackTrace();
  }

  }

  @SuppressWarnings("unchecked")
  public void load(String filename) {
    if (list.size() > 0) { // ì¤‘ë³µ ë¡œë”© ë°©ì§€!
      return;
    }

    try (ObjectInputStream in = new ObjectInputStream(new FileInputStream(filename))) {

      list = (List<Board>) in.readObject();

      if (list.size() > 0) {
        lastNo = list.get(list.size() - 1).getNo();
		  }
//      try (ObjectInputStream in = new ObjectInputStream(new FileInputStream(filename))) {
//
//        int size = in.readInt();
//
//        for (int i = 0; i < size; i++) {
//          list.add((Board) (in.readObject()));
//        }
//
//        if (list.size() > 0) {
//          lastNo = list.get(list.size() - 1).getNo();
//        }
//      }

    } catch (Exception e) {
      e.printStackTrace();
    }
  }
```